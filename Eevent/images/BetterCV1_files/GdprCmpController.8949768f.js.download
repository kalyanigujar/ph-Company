(()=>{function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire94c2,n=t.register;n("kRyoT",function(n,o){e(n.exports,"GdprCmpController",()=>a);var s=t("kzI06"),r=t("8QPZA"),i=t("8bfDC");class a extends s.CmpController{constructor(e,t,n){super(e,t,n),this.consent=new r.GdprConsentModel(e.consent,{uiVersion:null==n?void 0:n.uiVersion}),this.i18n=new i.GdprI18nModel(e.i18n)}}}),n("kzI06",function(n,o){e(n.exports,"CmpController",()=>I);var s=t("h2FSh"),r=t("kTJf3"),i=t("7nwmn"),a=t("7qJ26"),c=t("dIRcU"),d=t("e08dO"),u=t("2hIpA"),l=t("5CKHf"),p=t("8bfDC"),v=t("gUC9p"),g=t("6YDm0"),h=t("bxjJO"),f=t("3mZL4"),C=t("jRIZe"),m=t("5TDlN"),S=t("hN3Ja"),y=t("dH0Qb"),E=t("cnbVL"),b=t("96QDM"),D=t("N85OF");class I{getLocation(){return this.location}isGppActive(){return!!this.gppService}initAbortController(){this.abortController=new AbortController}getConsentDetails(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;return(0,s._)(function(){return(0,c.__generator)(this,function(n){return t.consent?[2,{consent:(0,i._)((0,r._)({},t.consent),{fromUserAction:!e}),services:(0,r._)({},t.dps.services),categories:(0,r._)({},t.dps.categories)}]:[2]})})()}fetchI18nDataForLanguage(e){var t=this;return(0,s._)(function(){var n,o,s,i,a,d,u,l,p,v;return(0,c.__generator)(this,function(c){switch(c.label){case 0:return[4,t.apiService.fetchI18nData((0,r._)({language:e,settingsId:t.setting.id,settingsType:t.setting.type,settingsVersion:t.setting.version,activeTcfVendorsListVersion:null===(o=t.coreData)||void 0===o?void 0:null===(n=o.tcf)||void 0===n?void 0:n.vendorsListVersion,previousTcfVendorsListVersion:t.consent&&(null===(i=t.consent)||void 0===i?void 0:null===(s=i.vendorsList)||void 0===s?void 0:s.version)||(null===(d=t.coreData)||void 0===d?void 0:null===(a=d.tcf)||void 0===a?void 0:a.vendorsListVersion),previousTcfPolicyVersion:t.consent&&(null===(l=t.consent)||void 0===l?void 0:null===(u=l.vendorsList)||void 0===u?void 0:u.policyVersion)||(null===(v=t.coreData)||void 0===v?void 0:null===(p=v.tcf)||void 0===p?void 0:p.policyVersion),theme:t.ui.theme},t.draft&&{draft:t.draft}))];case 1:return[2,c.sent()]}})})()}initI18nData(){var e=this;return(0,s._)(function(){var t,n,o,s;return(0,c.__generator)(this,function(r){switch(r.label){case 0:if(!(!e.englishI18nFallbackData&&"en"!==e.ui.language))return[3,2];return[4,e.fetchI18nDataForLanguage("en")];case 1:e.englishI18nFallbackData=r.sent(),r.label=2;case 2:return[4,e.fetchI18nDataForLanguage(e.ui.language)];case 3:if(!(t=r.sent()))return[2];return n=t,e.englishI18nFallbackData&&(n=e.mergeWithFallback(t,e.englishI18nFallbackData)),(0,p.isGdprI18nData)(n)?e.i18n=new p.GdprI18nModel(n):(0,v.isTcfI18nData)(n)?(e.i18n=new v.TcfI18nModel(n),(null===(s=e.tcf)||void 0===s?void 0:null===(o=s.acm)||void 0===o?void 0:o.vendors)&&e.tcf.updateAcmVendorsPurposes(e.i18n.tcf.acm.vendorsPurposes)):(0,g.isCcpaI18nData)(n)&&(e.i18n=new g.UsI18nModel(n)),[2]}})})()}mergeWithFallback(e,t){if("object"!=typeof e||null===e)return e;if(Array.isArray(e)&&Array.isArray(t))return e.map((e,n)=>"object"==typeof e&&null!==e&&"object"==typeof t[n]?this.mergeWithFallback(e,t[n]):null!=e?e:t[n]);var n=(0,r._)({},t);for(var o in e)void 0!==e[o]&&null!==e[o]&&""!==e[o]&&(n[o]="object"==typeof e[o]&&"object"==typeof t[o]?this.mergeWithFallback(e[o],t[o]):e[o]);return n}clearStorage(){var e=this;return(0,s._)(function(){return(0,c.__generator)(this,function(t){return[2,e.consentService.clearConsentsLocally()]})})()}unblockScriptsWithConsent(){var e=this;return(0,s._)(function(){var t,n;return(0,c.__generator)(this,function(o){return t=e.dps.getAcceptedServices("name"),n=e.dps.getAcceptedServices("id"),[2,e.scriptService.unblockScripts(t,n)]})})()}getControllerId(){var e;return null===(e=this.consent)||void 0===e?void 0:e.controllerId}getLanguage(){return this.ui.getLanguage()}getIsConsentRequired(){var e;return null===(e=this.consent)||void 0===e?void 0:e.required}changeLanguage(e){var t=this;return(0,s._)(function(){return(0,c.__generator)(this,function(n){switch(n.label){case 0:if(!t.languages.getHasLanguage(e))return[2];return t.ui.setLanguage(e),t.localStorageService.setUiData({language:e}),[4,t.initI18nData()];case 1:return n.sent(),[2]}})})()}setAnalyticsPixel(e,t){var n;null===(n=this.analyticsService)||void 0===n||n.setAnalyticsPixel(e,t)}dispatchViewChanged(e,t){(0,E.V2BridgeCustomEvents).dispatchUcUiViewChangedEvent({previousView:e,view:t})}signalIABViewChanged(e,t){this.gppService&&("first"===t||"second"===t?this.gppService.setCmpDisplayVisible():this.gppService.setCmpDisplayHidden(),this.gppService.setCmpSignalReady(),this.gppService.setCmpStatusLoaded()),this.tcf&&(("none"===e||"button"===e)&&("first"===t||"second"===t)?this.tcf.setUIOpen():("first"===e||"second"===e)&&("none"===t||"button"===t)&&this.tcf.setUIClosed())}acceptAllConsents(){var e=this;return(0,s._)(function(){return(0,c.__generator)(this,function(t){return e.tcf&&e.tcf.acceptAll(),e.dps.acceptAll(),[2]})})()}denyAllConsents(){var e=this;return(0,s._)(function(){return(0,c.__generator)(this,function(t){return e.tcf&&e.tcf.denyAll(),e.dps.denyAll(),[2]})})()}updateServicesConsents(e){var t=this;return(0,s._)(function(){return(0,c.__generator)(this,function(n){return t.dps.updateSome(e),[2]})})()}updateServiceConsent(e){var t=this;return(0,s._)(function(){return(0,c.__generator)(this,function(n){return t.dps.updateSome([e]),[2]})})()}updateCategoriesConsents(e){var t=this;return(0,s._)(function(){return(0,c.__generator)(this,function(n){return t.dps.updateCategoriesConsents(e),[2]})})()}updateCategoryConsent(e){var t=this;return(0,s._)(function(){return(0,c.__generator)(this,function(n){return t.dps.updateCategoriesConsents([e]),[2]})})()}saveConsents(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"EXPLICIT",t=arguments.length>1?arguments[1]:void 0,n=this;return(0,s._)(function(){var o,s,r,i,a,d,u;return(0,c.__generator)(this,function(c){switch(c.label){case 0:if(!n.consent)return[3,2];return n.consent.setUiVersion(),n.consent.setRequired(!1),n.consent.setSetting(n.setting),n.consent.setLanguage(n.ui.getLanguage()),n.consent.setUpdatedAt(Date.now()),s=n.consent.hash,n.consent.setHash((0,f.sha256)(n.consent.updatedAt.toString())),"US"===n.setting.type?(r="ALL_DENIED"===n.dps.getConsentStatus(),(i=n.consent).setHasOptedOut(r),i.emitCcpaString()):t?n.consent.setUpdatedBy("onUpdateServices"):n.consent.setUpdatedBy(n.dps.updatedBy||(null===(o=n.tcf)||void 0===o?void 0:o.updatedBy)||"onUpdateServices"),n.dps.updatedBy=void 0,n.tcf&&(n.tcf.updatedBy=void 0),n.consent.setStatus(n.dps.getConsentStatus()),n.consent.setServiceIds(n.dps.getConsentServiceIds()),n.consent.setType(e),n.tcf&&(n.tcf.applySpecialCasesForVendors(),a=n.tcf.generateTcString(),(d=n.consent).setTcString(a),n.tcf.acm&&(u=n.tcf.getACString(),d.setAcString(u),n.tcf.setAddtlConsent(u)),n.tcf.refreshTimestamp(),n.tcf.updateTcfApi(a)),[4,n.applyConsents(s,t,!1)];case 1:c.sent(),c.label=2;case 2:return[2]}})})()}saveConsentRemotely(){var e=this;return(0,s._)(function(){var t,n;return(0,c.__generator)(this,function(o){switch(o.label){case 0:if(!(e.consent&&!e.consent.isBot))return[3,2];return t=e.tcf&&Object.entries(e.tcf.vendors).map(e=>{var t=(0,a._)(e,2),n=t[0],o=t[1];return[+n,o.legIntPurposes,o.purposes,o.specialPurposes]}),n=(0,r._)({consent:e.consent,services:e.dps.services,settingsType:e.setting.type,ucString:e.localStorageService.getConsentString(),consentWebhookEnabled:e.consentWebhookEnabled,crossDeviceEnabled:e.crossDeviceEnabled,analyticsEnabled:void 0!==e.analyticsService},t&&{vendors:t}),[4,e.consentService.saveConsentRemotely(n)];case 1:o.sent(),o.label=2;case 2:return[2]}})})()}areAllConsentsAccepted(){return"ALL_ACCEPTED"===this.dps.getConsentStatus()}areAllConsentsDenied(){return"ALL_DENIED"===this.dps.getConsentStatus()}getServiceInfo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,s._)(function(){var o;return(0,c.__generator)(this,function(s){switch(s.label){case 0:if(!(o=n.dps.getService(e)))return[2];if(!(!n.i18n||t&&!n.i18n.getServiceHasDetails(e)))return[3,2];return[4,n.initI18nData()];case 1:s.sent(),s.label=2;case 2:if(n.i18n)return[2,{service:o,i18n:n.i18n.getService(e)}];return[2]}})})()}getStoredInfoByUrl(e){var t=this;return(0,s._)(function(){var n,o,s,a,u,l,p,v,g,h,f,C,m,S,y,E,b,D,I,T,_,w,A,N,U,L,O,M,k,V,P,F,z;return(0,c.__generator)(this,function(c){switch(c.label){case 0:return n={},[4,t.apiService.fetchStoredInfoData(e)];case 1:if(o=c.sent(),s="TCF"===t.setting.getType(),void 0!==t.i18n)return[3,3];return[4,t.initI18nData()];case 2:return c.sent(),[3,4];case 3:u=(a=t.i18n.base.cookieInformation).anyDomain,l=a.cookieRefresh,p=a.domain,v=a.multipleDomains,h=void 0===(g=a.duration)?"duration":g,f=a.no,m=void 0===(C=a.type)?"type":C,S=a.yes,E=(y=t.i18n.base).purposes,b=y.day,D=y.days,I=y.hour,T=y.hours,_=y.minute,w=y.minutes,A=y.month,N=y.months,U=y.second,L=y.seconds,O=y.session,M=y.year,k=y.years,o&&(V=o.disclosures,P=o.domains,F=[],z=[],V.map(e=>{var n=e.cookieRefresh,o=e.description,a=e.domain,c=e.identifier,g=e.maxAgeSeconds,C=e.name,y=e.type,V=e.purposes,P="";if(s&&V&&(null==V?void 0:V.length)>0){var z=[];V.forEach(e=>{var n;(null===(n=t.tcf)||void 0===n?void 0:n.purposes[e])&&z.push(t.tcf.purposes[e].name)}),P=`${z.join("; ")}`}var R=[];R.push({label:m,value:`${y}`,id:"type"}),"cookie"===y.toString()&&R.push({label:h,value:(0,d.convertCookieMaxAge)(g,{day:b,days:D,hour:I,hours:T,minute:_,minutes:w,month:A,months:N,second:U,seconds:L,session:O,year:M,years:k}),id:"duration"}),null!==n&&R.push({label:l,value:n?S:f,id:"cookieRefresh"}),a&&R.push({label:p,value:(0,d.convertDomain)(a,u,v),id:"domain"}),s&&""!==P&&R.push({label:E||"Purposes",value:P,id:"purposes"}),F.push((0,i._)((0,r._)({id:null!=C?C:c,name:null!=C?C:c},o&&{description:o}),{body:R}))}),s&&(null==P||P.map(e=>{var t=e.domain,n=e.use;z.push({id:t,name:t,body:[...n?[{label:E||"Purposes",value:n,id:"domains"}]:[]]})})),F.length>0&&(n.disclosures=F),z.length>0&&(n.domains=z)),c.label=4;case 4:return[2,n]}})})()}applyConsents(e,t,n){var o=this;return(0,s._)(function(){var s,r,i,a,u,p,v,g,h,f,C,m,S;return(0,c.__generator)(this,function(c){switch(c.label){case 0:if(!o.consent)throw Error("No consents");if(r=o.consent.hash!==e,i="true"===window.ucSkipGtagUpdates,o.gcm&&!i&&o.gcm.apply(o.consent.type,o.dps.services,o.advertiserConsentModeEnabled?null===(s=o.tcf)||void 0===s?void 0:s.vendors[755]:void 0),o.uet&&o.uet.apply(o.dps.services,o.consent.type),o.acs&&o.acs.apply(o.dps.services,o.consent.type),!r)return[3,2];return[4,o.consentService.saveConsentLocally(o.consent,o.dps)];case 1:c.sent(),o.gppService&&(u="",(0,l.isUsConsentModel)(o.consent)&&(u=o.consent.ccpaString,p=o.consent.legislation),(0,l.isTcfConsentModel)(o.consent)&&(u=o.consent.tcString),null===(a=o.gppService)||void 0===a||a.setSectionString(u,o.setting.type,p)),c.label=2;case 2:if(setTimeout(()=>{o.unblockScriptsWithConsent()},0),!(o.customEventService||o.dataLayerService))return[3,4];return[4,o.getConsentDetails(n)];case 3:(v=c.sent())&&(o.customEventService.dispatchConsentDetails(v),null===(g=o.dataLayerService)||void 0===g||g.push((0,E.V2BridgeCustomEvents).getConsentDetailsV2(v))),c.label=4;case 4:if(!r)return[3,6];return o.saveConsentRemotely().catch(()=>{(0,d.UCConsole).error("CmpController - saveConsentRemotely","Could not save consents")}),f=(h=o.customEventService).dispatch,C=["UC_CONSENT_CHANGED"],[4,o.getConsentDetails()];case 5:return f.apply(h,C.concat([c.sent()])),[3,7];case 6:(null==(m=o.localStorageService.getUcData())?void 0:m.consent)||(S=o.consentService.mapServicesData(o.dps.services),o.localStorageService.setConsentData({services:S})),c.label=7;case 7:return(0,b.webSdkEvents).emit("CONSENTS_APPLIED",{fromEmbeddings:t}),[2]}})})()}getPrivacyButtonTheme(e){var t=this.languages.getLanguageScreenDirection(this.ui.getLanguage());return this.theme.getPrivacyButtonTheme({custom:e,direction:t})}getEmbeddingTheme(e){var t=this.languages.getLanguageScreenDirection(this.ui.getLanguage());return this.theme.getEmbeddingsTheme({custom:e,direction:t})}getCmpTheme(e,t){var n=this.languages.getLanguageScreenDirection(this.ui.getLanguage());return this.theme.getCmpTheme(e,{custom:t,direction:n})}getThemeDefaults(){this.theme.getThemeDefaults()}updateTheme(e){e&&(this.theme=new u.ThemeModel(e))}getCmpConfig(){var e=this;return(0,s._)(function(){var t,n;return(0,c.__generator)(this,function(o){return[2,{i18n:(0,r._)({},(null===(t=e.i18n)||void 0===t?void 0:t.base.poweredBy.isEnabled)&&{poweredBy:null===(n=e.i18n)||void 0===n?void 0:n.base.poweredBy})}]})})()}getServices(){var e=this;return(0,s._)(function(){return(0,c.__generator)(this,function(t){return[2,Object.entries(e.dps.services)]})})()}getCategories(){var e=this;return(0,s._)(function(){return(0,c.__generator)(this,function(t){return[2,Object.entries(e.dps.categories)]})})()}getLanguages(){var e=this;return(0,s._)(function(){return(0,c.__generator)(this,function(t){return[2,Object.entries(e.languages.languages)]})})()}reset(){var e,t;null===(e=this.tcf)||void 0===e||e.resetTcModel(),null===(t=this.dps)||void 0===t||t.resetDpsModel()}constructor(e,t,n){var o=t.apiService,s=t.consentService,r=t.localStorageService,i=t.analyticsService,a=t.gppService;this.englishI18nFallbackData=null,this.draft=!1;var c=(0,D.getCombinedCmpData)(e,n);(0,b.webSdkEvents).emit("CMP_DATA_COMBINED",c);var d=c.dps,l=c.gcm,p=c.uet,v=c.core,g=c.integrations,f=c.setting,E=c.ui,I=c.languages,T=c.theme,_=c.template,w=c.acs;this.coreData=null==n?void 0:n.settingsCoreData,this.apiService=o,this.analyticsService=i,this.consentService=s,this.customEventService=new h.CustomEventService(v.customEvents||[]),this.gppService=a,this.localStorageService=r,this.scriptService=new h.ScriptService,v.dataLayers&&(this.dataLayerService=new h.DataLayerService(v.dataLayers)),this.consentWebhookEnabled=null==n?void 0:n.isConsentWebhookEnabled,this.crossDeviceEnabled=null==n?void 0:n.isCrossDeviceEnabled,this.advertiserConsentModeEnabled=e.core.advertiserConsentModeEnabled,this.ui=new u.UiModel(E),this.languages=new u.LanguagesModel(I),this.setting=new u.SettingModel(f),this.dps=new u.DpsModel(d),this.theme=new u.ThemeModel(T||{}),this.location=null,(null==n?void 0:n.location)&&(this.location=null==n?void 0:n.location),this.abortController=new AbortController,(null==n?void 0:n.draft)&&(this.draft=null==n?void 0:n.draft),_&&(this.template=new u.TemplateModel(_)),g&&(this.integrations=new S.IntegrationsModel(g)),l&&(this.gcm=new m.GoogleConsentModeModel(l,r,this.customEventService)),p&&(this.uet=new y.UetModel(this.customEventService)),w&&"TCF"!==this.setting.getType()&&(this.acs=new C.AcsModel(this.customEventService,null==n?void 0:n.location))}}}),n("5CKHf",function(t,n){e(t.exports,"isUsConsentModel",()=>o),e(t.exports,"isTcfConsentModel",()=>s);var o=e=>"US"===e.setting.type,s=e=>"TCF"===e.setting.type}),n("8bfDC",function(n,o){e(n.exports,"GdprI18nModel",()=>r),e(n.exports,"isGdprI18nData",()=>i);var s=t("14GuN");class r extends s.I18nModel{constructor(e){super(e),this.gdpr=e.gdpr}}var i=e=>"gdpr"in e}),n("gUC9p",function(n,o){e(n.exports,"TcfI18nModel",()=>r),e(n.exports,"isTcfI18nData",()=>i);var s=t("14GuN");class r extends s.I18nModel{constructor(e){super(e),this.tcf=e.tcf}}var i=e=>"tcf"in e}),n("6YDm0",function(n,o){e(n.exports,"UsI18nModel",()=>r),e(n.exports,"isCcpaI18nData",()=>i);var s=t("14GuN");class r extends s.I18nModel{constructor(e){super(e),this.ccpa=e.ccpa}}var i=e=>"ccpa"in e}),n("jRIZe",function(n,o){e(n.exports,"AcsModel",()=>a);var s=t("7qJ26"),r=t("e08dO"),i=t("evP80");class a{getAcsState(e){return Object.entries(e).reduce((e,t)=>{var n,o,r,i,a,c,d=(0,s._)(t,2)[1];return(null===(n=d.acs)||void 0===n?void 0:n.adStorage)!==void 0&&(e.adStorage=(null===(o=d.consent)||void 0===o?void 0:o.type)==="EXPLICIT"&&(null===(r=d.consent)||void 0===r?void 0:r.given)&&(!0===e.adStorage||void 0===e.adStorage)),(null===(i=d.acs)||void 0===i?void 0:i.userData)!==void 0&&(e.userData=(null===(a=d.consent)||void 0===a?void 0:a.type)==="EXPLICIT"&&(null===(c=d.consent)||void 0===c?void 0:c.given)&&(!0===e.userData||void 0===e.userData)),e},{})}push(e){var t=e.adStorage,n=e.userData;this.userLocation?(window.amznConsent().setCountryCode(this.userLocation.country).setEnableAdStorage(t).setEnableUserData(n).build(),this.customEventService.dispatchUcAcsUpdateEvent(e)):(0,r.UCConsole).warn("AcsModel - Unable to fetch location",`userLocation: ${this.userLocation}, acsData: ${e}`)}apply(e,t){if((null===(i=window.ucCmpConfig)||void 0===i||null===(r=i.acsConfig)||void 0===r||!r.disabled)&&"EXPLICIT"===t){var n=this.getAcsState(e),o=n.adStorage,s=n.userData;if(void 0!==o&&void 0!==s){var r,i,a,c={adStorage:o,userData:s,countryCode:(null===(a=this.userLocation)||void 0===a?void 0:a.country)||""};this.push(c)}}}constructor(e,t){this.customEventService=e,this.userLocation=t,(0,i.default).amznConsent()}}}),n("evP80",function(n,o){e(n.exports,"default",()=>r);var s=t("kTJf3"),r={amznConsent:function(){var e,t,n=e=>!(!e||!/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$/.test(e))&&e.split(".").every(e=>{var t=parseInt(e,10);return t>=0&&t<=255}),o=e=>!isNaN(Date.parse(e)),r={COOKIE_NAME:"amzn_consent",COOKIE_TTL_MS:24192e5,COOKIE_PATH:"/",COOKIE_SAME_SITE:"Strict",CONSENT_CHANGE_EVENT:"amznConsentChange",CONSENT_STATUS:{GRANTED:"GRANTED",DENIED:"DENIED"},DEFAULT_VERSION:"1",DEFAULT_CONSENT:{geo:{ipAddress:"",countryCode:""},amazonConsentFormat:{amznAdStorage:"DENIED",amznUserData:"DENIED"},gpp:"",tcf:"",timestamp:"",version:"1"},COUNTRY_CODE_LENGTH:2};class i{getConsentData(e){var t,n;try{if("string"==typeof e)t=JSON.parse(e);else{if("object"!=typeof e||null===e)throw Error("Input must be either a JSON string or an object");t=e}return n=this.isValidFormattedOutput(t)?t:this.formatOutput(t),this.validateFormattedOutput(n),n}catch(e){return console.error("Error in getConsentData:",e.message),null}}validateInput(e){var t;if(void 0!==e.version&&("number"!=typeof e.version||1!==e.version))throw Error("Invalid version. Must be 1 if provided");if(void 0!==e.ipAddress&&("string"!=typeof e.ipAddress||!n(e.ipAddress)))throw Error("Invalid IP address");if(void 0!==e.countryCode&&("string"!=typeof e.countryCode||2!==(null===(t=e.countryCode)||void 0===t?void 0:t.length)))throw Error("Invalid country code. Must be a 2-letter code");if(void 0!==e.enableAdStorage&&"boolean"!=typeof e.enableAdStorage)throw Error("enableAdStorage must be a boolean");if(void 0!==e.enableUserData&&"boolean"!=typeof e.enableUserData)throw Error("enableUserData must be a boolean");if(void 0!==e.gpp&&"string"!=typeof e.gpp)throw Error("gpp must be a string");if(void 0!==e.tcf&&"string"!=typeof e.tcf)throw Error("tcf must be a string");if(e.timestamp&&!o(e.timestamp))throw Error("Invalid timestamp")}formatOutput(e){return this.validateInput(e),{geo:{ipAddress:e.ipAddress,countryCode:e.countryCode},amazonConsentFormat:{amznAdStorage:e.enableAdStorage?r.CONSENT_STATUS.GRANTED:r.CONSENT_STATUS.DENIED,amznUserData:e.enableUserData?r.CONSENT_STATUS.GRANTED:r.CONSENT_STATUS.DENIED},gpp:e.gpp,tcf:e.tcf,timestamp:e.timestamp||new Date().toISOString(),version:e.version?e.version.toString():this.defaultVersion}}isValidFormattedOutput(e){return"object"==typeof e&&null!==e&&"geo"in e&&"amazonConsentFormat"in e&&"gpp"in e&&"tcf"in e&&"timestamp"in e&&"version"in e}validateFormattedOutput(e){var t,s,i,a,c;if(!e.geo&&!e.amazonConsentFormat)throw Error("Either geo or amazonConsentFormat must be provided");if(void 0!==(null===(t=e.geo)||void 0===t?void 0:t.ipAddress)&&!n(null===(s=e.geo)||void 0===s?void 0:s.ipAddress))throw Error("Invalid IP address in formatted output");if((null===(i=e.geo)||void 0===i?void 0:i.countryCode)&&e.geo.countryCode.length!==r.COUNTRY_CODE_LENGTH)throw Error("Invalid country code in formatted output");if((null===(a=e.amazonConsentFormat)||void 0===a?void 0:a.amznAdStorage)&&![r.CONSENT_STATUS.GRANTED,r.CONSENT_STATUS.DENIED].includes(e.amazonConsentFormat.amznAdStorage))throw Error("Invalid amznAdStorage value in formatted output");if((null===(c=e.amazonConsentFormat)||void 0===c?void 0:c.amznUserData)&&![r.CONSENT_STATUS.GRANTED,r.CONSENT_STATUS.DENIED].includes(e.amazonConsentFormat.amznUserData))throw Error("Invalid amznUserData value in formatted output");if(void 0!==e.gpp&&"string"!=typeof e.gpp)throw Error("Invalid gpp in formatted output");if(void 0!==e.tcf&&"string"!=typeof e.tcf)throw Error("Invalid tcf in formatted output");if(!o(e.timestamp))throw Error("Invalid timestamp in formatted output");if(e.version!==r.DEFAULT_VERSION)throw Error("Invalid version in formatted output")}constructor(){this.defaultVersion=r.DEFAULT_VERSION}}class a{dispatchCookieChange(e){var t=new CustomEvent(r.CONSENT_CHANGE_EVENT,{detail:{consent:e}});window.dispatchEvent(t)}setConsentCookie(e){var t=JSON.stringify(e),n=new Date;n.setTime(n.getTime()+this.cookieTtl),document.cookie=`${this.cookieName}=${encodeURIComponent(t)}; expires=${n.toUTCString()}; path=${r.COOKIE_PATH}; SameSite=${r.COOKIE_SAME_SITE}; Secure`,this.dispatchCookieChange(e)}isValidConsentCookie(e){return e&&"object"==typeof e&&"amazonConsentFormat"in e&&"version"in e&&"timestamp"in e}getConsentCookie(){var e=document.cookie.split("; ").find(e=>e.startsWith(`${this.cookieName}=`));if(!e)return null;try{var t=decodeURIComponent(e.split("=")[1]),n=JSON.parse(t);return this.isValidConsentCookie(n)?n:null}catch(e){return console.error("Error parsing consent cookie:",e),null}}setDefaultConsent(){this.setConsentCookie(this.defaultConsent)}clearConsentCookie(){document.cookie=`${this.cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`,this.dispatchCookieChange(null)}constructor(){this.cookieName=r.COOKIE_NAME,this.cookieTtl=r.COOKIE_TTL_MS,this.COOKIE_CHANGE_EVENT="amznConsentChange",this.defaultConsent=(0,s._)({},r.DEFAULT_CONSENT)}}class c{setIpAddress(e){if("string"!=typeof e)throw TypeError("IP address must be a string");if(!n(e))throw Error("Invalid IP address");return this.data.ipAddress=e,this}setCountryCode(e){if("string"!=typeof e||2!==e.length)throw TypeError("Country code must be a 2-letter string");return this.data.countryCode=e,this}setEnableAdStorage(e){if("boolean"!=typeof e)throw TypeError("enableAdStorage must be a boolean");return this.data.enableAdStorage=e,this}setEnableUserData(e){if("boolean"!=typeof e)throw TypeError("enableUserData must be a boolean");return this.data.enableUserData=e,this}setGpp(e){if("string"!=typeof e)throw TypeError("GPP must be a string");return this.data.gpp=e,this}setTcf(e){if("string"!=typeof e)throw TypeError("TCF must be a string");return this.data.tcf=e,this}setVersion(e){if("number"!=typeof e||1!==e)throw TypeError("Version must be the number 1");return this.data.version=e,this}setTimestamp(e){if("string"!=typeof e||isNaN(Date.parse(e)))throw TypeError("Timestamp must be a valid date string");return this.data.timestamp=e,this}build(){var e=new i,t=new a,n=e.getConsentData(this.data);return n&&t.setConsentCookie(n),n}constructor(){this.data={}}}"u">typeof window&&(e=new i,(t=new a).getConsentCookie()||t.setDefaultConsent(),window.amznConsent=function(){for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];if(0===o.length)return new c;try{var r=e.getConsentData(o[0]);return r&&t.setConsentCookie(r),r}catch(e){return console.error("Error in amznConsent:",e.message),null}})}}}),n("hN3Ja",function(t,n){e(t.exports,"IntegrationsModel",()=>o);class o{getScripts(){return this.scripts}constructor(e){var t=e.scripts;this.scripts=t}}}),n("dH0Qb",function(n,o){e(n.exports,"UetModel",()=>r);var s=t("7qJ26");class r{getUetState(e){return Object.entries(e).reduce((e,t)=>{var n,o,r,i=(0,s._)(t,2)[1];return(null===(n=i.uet)||void 0===n?void 0:n.adStorage)!==void 0&&(e.adStorage=(null===(o=i.consent)||void 0===o?void 0:o.type)==="EXPLICIT"&&(null===(r=i.consent)||void 0===r?void 0:r.given)&&(!0===e.adStorage||void 0===e.adStorage)),e},{})}push(e){var t=e.adStorage;window.uetq=window.uetq||[],window.uetq.push("consent","update",{ad_storage:t}),this.customEventService.dispatchUcUetUpdateEvent(e)}apply(e,t){if((null===(o=window.ucCmpConfig)||void 0===o||null===(n=o.uetConfig)||void 0===n||!n.disabled)&&"EXPLICIT"===t){var n,o,s=this.getUetState(e).adStorage;void 0!==s&&this.push({adStorage:s?"granted":"denied"})}}constructor(e){this.customEventService=e}}}),n("N85OF",function(n,o){e(n.exports,"getCombinedCmpData",()=>l);var s=t("7qJ26"),r=t("bY6u9"),i=t("2hIpA"),a=t("3mZL4"),c=e=>(new Date().getTime()-e)/864e5,d=(e,t)=>!!(t&&e&&c(e)>t),u=(e,t)=>!!(t&&e&&Date.now()/1e3>t&&e/1e3<t),l=(e,t)=>{var n,o,c=e.consent,l=(t||{}).consentData,p=Date.now();if(c.uiVersion||(c.uiVersion=(null===(n=window.__ucMock)||void 0===n?void 0:n.uiVersion)||(null==l?void 0:l.uiVersion)||(null==t?void 0:t.uiVersion)),!c.controllerId&&(null==l?void 0:l.controllerId)&&(c.controllerId=l.controllerId),!c.controllerId&&(null===(o=window.__ucMock)||void 0===o?void 0:o.controllerId)&&(c.controllerId=window.__ucMock.controllerId),c.createdAt||(c.createdAt=(null==l?void 0:l.createdAt)||p),c.updatedAt||(e.consent.updatedAt=(null==l?void 0:l.updatedAt)||p),!c.tcString&&(null==l?void 0:l.tcString)&&(e.consent.tcString=l.tcString),"onInitialPageLoad"===e.consent.updatedBy&&(null==l?void 0:l.updatedBy)&&(e.consent.updatedBy=l.updatedBy),navigator.globalPrivacyControl&&"US"===e.setting.type&&"onDenyAllServices"===e.consent.updatedBy&&(null==l?void 0:l.gpcSignal)&&(e.consent.gpcSignal=!0),u(e.consent.updatedAt,e.ui.renewConsentsTimestamp)?e.ui.initialView="first":d(e.consent.updatedAt,e.ui.reshowAfterDays)?e.ui.initialView="first":e.ui.initialView||(e.ui.initialView=(null==l?void 0:l.type)==="EXPLICIT"||(null==l?void 0:l.updatedBy)==="onMobileSessionRestore"?e.ui.closedView:"first"),e.consent.required=e.ui.initialView!==e.ui.closedView,navigator.globalPrivacyControl&&"US"===e.setting.type&&(!l||"IMPLICIT"===l.type)){var v=new i.DpsModel(e.dps);v.denyAll(),e.dps=v,e.consent.gpcSignal=!0,e.consent.type="EXPLICIT",e.consent.updatedBy="onDenyAllServices";var g=e.consent.ccpaString;e.consent.ccpaString=g.charAt(0)+g.charAt(1)+"Y"+g.charAt(3),e.consent.status=v.getConsentStatus()}else if(null==l?void 0:l.status){e.consent.type=l.type,e.consent.serviceIds=l.serviceIds,e.dps.services=Object.entries(e.dps.services).reduce((e,t)=>{var n,o,r=(0,s._)(t,2),i=r[0],a=r[1];return"added"!==a.status&&(null==a?void 0:a.consent)&&(a.consent.given=a.essential||"ALL_ACCEPTED"===l.status||"SOME_ACCEPTED"===l.status&&(null===(n=l.serviceIds)||void 0===n?void 0:n.includes(i))||"SOME_DENIED"===l.status&&!(null===(o=l.serviceIds)||void 0===o?void 0:o.includes(i)),a.consent.type=l.type),e[i]=a,e},{}),e.dps.categories=(0,r.getCategoriesWithServicesConsent)(e.dps.categories,e.dps.services);var h=new i.DpsModel(e.dps);e.consent.status=h.getConsentStatus()}else{var f=new i.DpsModel(e.dps);e.consent.status=f.getConsentStatus(),e.consent.serviceIds=f.getConsentServiceIds()}return!e.consent.hash&&(e.consent.hash=(0,a.sha256)(e.consent.updatedAt.toString()),l&&l.hash&&l.hash!==e.consent.hash&&(e.consent.updatedBy="onEssentialChange")),e}})})();